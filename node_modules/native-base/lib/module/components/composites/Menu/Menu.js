var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _Box=_interopRequireDefault(require("../../primitives/Box"));var _useThemeProps=require("../../../hooks/useThemeProps");var _Popper=require("../Popper");var _reactNative=require("react-native");var _hooks=require("../../../hooks");var _useMenu=require("./useMenu");var _Backdrop=_interopRequireDefault(require("../Backdrop"));var _Transitions=require("../Transitions");var _focus=require("@react-native-aria/focus");var _MenuContext=require("./MenuContext");var _Overlay=require("../../primitives/Overlay");var _this=this,_jsxFileName="/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Menu/Menu.tsx";var Menu=function Menu(_ref,ref){var trigger=_ref.trigger,_ref$closeOnSelect=_ref.closeOnSelect,closeOnSelect=_ref$closeOnSelect===void 0?true:_ref$closeOnSelect,children=_ref.children,onOpen=_ref.onOpen,onClose=_ref.onClose,isOpenProp=_ref.isOpen,defaultIsOpen=_ref.defaultIsOpen,_ref$placement=_ref.placement,placement=_ref$placement===void 0?'bottom left':_ref$placement,restProps=(0,_objectWithoutProperties2.default)(_ref,["trigger","closeOnSelect","children","onOpen","onClose","isOpen","defaultIsOpen","placement"]);var triggerRef=_react.default.useRef(null);var _useControllableState=(0,_hooks.useControllableState)({value:isOpenProp,defaultValue:defaultIsOpen,onChange:function onChange(value){value?onOpen&&onOpen():onClose&&onClose();}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),isOpen=_useControllableState2[0],setIsOpen=_useControllableState2[1];var _usePropsResolution=(0,_useThemeProps.usePropsResolution)('Menu',restProps),transition=_usePropsResolution.transition,newProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,["transition"]);var handleOpen=_react.default.useCallback(function(){setIsOpen(true);},[setIsOpen]);var handleClose=_react.default.useCallback(function(){setIsOpen(false);},[setIsOpen]);var triggerProps=(0,_useMenu.useMenuTrigger)({handleOpen:handleOpen,isOpen:isOpen});var updatedTrigger=function updatedTrigger(){return trigger((0,_extends2.default)({},triggerProps,{ref:triggerRef,onPress:handleOpen}),{open:isOpen});};_react.default.useEffect(function(){if(isOpen){_reactNative.AccessibilityInfo.announceForAccessibility('Popup window');}},[isOpen]);return _react.default.createElement(_react.default.Fragment,null,updatedTrigger(),_react.default.createElement(_Overlay.Overlay,{isOpen:isOpen,onRequestClose:handleClose,useRNModalOnAndroid:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:7}},_react.default.createElement(_Transitions.PresenceTransition,(0,_extends2.default)({visible:isOpen},transition,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:9}}),_react.default.createElement(_Popper.Popper,(0,_extends2.default)({triggerRef:triggerRef,onClose:handleClose,placement:placement},restProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:11}}),_react.default.createElement(_Backdrop.default,{bg:"transparent",onPress:handleClose,__self:_this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:13}}),_react.default.createElement(_Popper.Popper.Content,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:81,columnNumber:13}},_react.default.createElement(_MenuContext.MenuContext.Provider,{value:{closeOnSelect:closeOnSelect,onClose:handleClose},__self:_this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:15}},_react.default.createElement(_focus.FocusScope,{contain:true,restoreFocus:true,autoFocus:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:17}},_react.default.createElement(MenuContent,(0,_extends2.default)({menuRef:ref},newProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:19}}),children))))))));};var MenuContent=function MenuContent(_ref2){var menuRef=_ref2.menuRef,restProps=(0,_objectWithoutProperties2.default)(_ref2,["menuRef"]);var menuProps=(0,_useMenu.useMenu)();var typeaheadProps=(0,_useMenu.useMenuTypeahead)(menuProps);return _react.default.createElement(_Box.default,(0,_extends2.default)({},restProps,menuProps,typeaheadProps,{ref:menuRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:107,columnNumber:5}}),_react.default.createElement(_reactNative.ScrollView,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:108,columnNumber:7}},restProps.children));};var _default=(0,_react.memo)((0,_react.forwardRef)(Menu));exports.default=_default;
//# sourceMappingURL=Menu.js.map