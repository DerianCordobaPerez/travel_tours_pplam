var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useContrastText=useContrastText;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _tinycolor=_interopRequireDefault(require("tinycolor2"));var _useToken3=require("./useToken");var _hooks=require("../core/color-mode/hooks");var _NativeBaseContext=require("../core/NativeBaseContext");function useContrastText(bg,color){var _useToken=(0,_useToken3.useToken)('colors',['contrastThreshold','darkText','lightText',bg,color!=null?color:'']),_useToken2=(0,_slicedToArray2.default)(_useToken,5),contrastThreshold=_useToken2[0],trueDarkText=_useToken2[1],trueLightText=_useToken2[2],trueBg=_useToken2[3],trueColor=_useToken2[4];var suppressColorAccessibilityWarning=(0,_NativeBaseContext.useNativeBaseConfig)('NativeBaseConfigProvider').config.suppressColorAccessibilityWarning;var _useAccessibleColors=(0,_hooks.useAccessibleColors)(),_useAccessibleColors2=(0,_slicedToArray2.default)(_useAccessibleColors,1),accessibleColors=_useAccessibleColors2[0];if(typeof bg!=='string'){return;}var _bg$split=bg.split('.'),_bg$split2=(0,_slicedToArray2.default)(_bg$split,2),bgThemeColorVariant=_bg$split2[0],bgShade=_bg$split2[1];var textColor=!accessibleColors&&bgThemeColorVariant&&themeColorsThresholdShades[bgThemeColorVariant]?getContrastThemeColor(bgThemeColorVariant,bgShade):getAccessibleContrastColor(contrastThreshold,trueDarkText,trueLightText,trueBg,trueColor,bg,color,suppressColorAccessibilityWarning);return textColor;}function getContrastThemeColor(bgThemeColorVariant,bgShade){var shadeThreshold=themeColorsThresholdShades[bgThemeColorVariant];if(bgShade&&shadeThreshold&&(bgShade>=shadeThreshold&&bgThemeColorVariant!=='dark'||bgThemeColorVariant==='dark'&&bgShade<shadeThreshold)){return'lightText';}return'darkText';}function getAccessibleContrastColor(contrastThreshold,trueDarkText,trueLightText,trueBg,trueColor,bg,color,suppressColorAccessibilityWarning){if(typeof trueBg!=='string'){trueBg=bg;}var trueContrastColor;var contrastColorToken;var darkTextConstrast=getContrastRatio(trueBg,trueDarkText);var lightTextConstrast=getContrastRatio(trueBg,trueLightText);if(darkTextConstrast>=contrastThreshold||darkTextConstrast>lightTextConstrast){trueContrastColor=trueDarkText;contrastColorToken='darkText';}else{trueContrastColor=trueLightText;contrastColorToken='lightText';}if(process.env.NODE_ENV!=='production'){var contrast=getContrastRatio(trueBg,trueColor?trueColor:trueContrastColor);if(contrast<3&&!suppressColorAccessibilityWarning){console.warn(["NativeBase: The contrast ratio of "+contrast+":1 for "+(color?color:contrastColorToken)+" on "+bg,'falls below the WCAG recommended absolute minimum contrast ratio of 3:1.','https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast'].join('\n'));}}return contrastColorToken;}function getContrastRatio(foreground,background){var lumA=(0,_tinycolor.default)(foreground).getLuminance();var lumB=(0,_tinycolor.default)(background).getLuminance();return(Math.max(lumA,lumB)+0.05)/(Math.min(lumA,lumB)+0.05);}var themeColorsThresholdShades={rose:900,pink:900,fuchsia:800,purple:700,violet:600,indigo:500,blue:400,lightBlue:400,cyan:300,teal:300,emerald:300,green:400,lime:600,yellow:800,amber:900,orange:900,red:900,warmGray:500,trueGray:500,gray:500,coolGray:500,blueGray:500,dark:500,danger:900,error:900,success:400,warning:900,muted:500,primary:500,info:400,secondary:500,light:500};
//# sourceMappingURL=useContrastText.js.map