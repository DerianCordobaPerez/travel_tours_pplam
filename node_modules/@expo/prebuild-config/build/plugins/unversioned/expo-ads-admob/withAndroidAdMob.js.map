{"version":3,"file":"withAndroidAdMob.js","sourceRoot":"","sources":["../../../../src/plugins/unversioned/expo-ads-admob/withAndroidAdMob.ts"],"names":[],"mappings":";;;AAAA,yDAAwF;AAGxF,MAAM,EACJ,gCAAgC,EAChC,yBAAyB,EACzB,qCAAqC,GACtC,GAAG,8BAAa,CAAC,QAAQ,CAAC;AAE3B,MAAM,mBAAmB,GAAG,2CAA2C,CAAC;AACxE,MAAM,+BAA+B,GAAG,uDAAuD,CAAC;AAEzF,MAAM,gBAAgB,GAAiB,MAAM,CAAC,EAAE;IACrD,OAAO,oCAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC1C,MAAM,CAAC,UAAU,GAAG,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC;QAC9D,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AALW,QAAA,gBAAgB,oBAK3B;AAEF,SAAgB,uBAAuB,CAAC,MAAmC;;IACzE,OAAO,MAAA,MAAA,MAAA,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,oBAAoB,mCAAI,IAAI,CAAC;AAC9D,CAAC;AAFD,0DAEC;AAED,SAAgB,0BAA0B,CAAC,MAAmC;;IAC5E,OAAO,MAAA,MAAA,MAAA,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,uBAAuB,mCAAI,KAAK,CAAC;AAClE,CAAC;AAFD,gEAEC;AAED,SAAgB,cAAc,CAC5B,MAAmC,EACnC,eAAuD;IAEvD,MAAM,KAAK,GAAG,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAC9C,MAAM,QAAQ,GAAG,0BAA0B,CAAC,MAAM,CAAC,CAAC;IACpD,MAAM,eAAe,GAAG,yBAAyB,CAAC,eAAe,CAAC,CAAC;IAEnE,IAAI,KAAK,EAAE;QACT,gCAAgC,CAAC,eAAe,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;QAC9E,gCAAgC,CAC9B,eAAe,EACf,+BAA+B,EAC/B,MAAM,CAAC,CAAC,QAAQ,CAAC,CAClB,CAAC;KACH;SAAM;QACL,qCAAqC,CAAC,eAAe,EAAE,mBAAmB,CAAC,CAAC;QAC5E,qCAAqC,CAAC,eAAe,EAAE,+BAA+B,CAAC,CAAC;KACzF;IAED,OAAO,eAAe,CAAC;AACzB,CAAC;AArBD,wCAqBC","sourcesContent":["import { AndroidConfig, ConfigPlugin, withAndroidManifest } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\n\nconst {\n  addMetaDataItemToMainApplication,\n  getMainApplicationOrThrow,\n  removeMetaDataItemFromMainApplication,\n} = AndroidConfig.Manifest;\n\nconst META_APPLICATION_ID = 'com.google.android.gms.ads.APPLICATION_ID';\nconst META_DELAY_APP_MEASUREMENT_INIT = 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT';\n\nexport const withAndroidAdMob: ConfigPlugin = config => {\n  return withAndroidManifest(config, config => {\n    config.modResults = setAdMobConfig(config, config.modResults);\n    return config;\n  });\n};\n\nexport function getGoogleMobileAdsAppId(config: Pick<ExpoConfig, 'android'>) {\n  return config.android?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function getGoogleMobileAdsAutoInit(config: Pick<ExpoConfig, 'android'>) {\n  return config.android?.config?.googleMobileAdsAutoInit ?? false;\n}\n\nexport function setAdMobConfig(\n  config: Pick<ExpoConfig, 'android'>,\n  androidManifest: AndroidConfig.Manifest.AndroidManifest\n) {\n  const appId = getGoogleMobileAdsAppId(config);\n  const autoInit = getGoogleMobileAdsAutoInit(config);\n  const mainApplication = getMainApplicationOrThrow(androidManifest);\n\n  if (appId) {\n    addMetaDataItemToMainApplication(mainApplication, META_APPLICATION_ID, appId);\n    addMetaDataItemToMainApplication(\n      mainApplication,\n      META_DELAY_APP_MEASUREMENT_INIT,\n      String(!autoInit)\n    );\n  } else {\n    removeMetaDataItemFromMainApplication(mainApplication, META_APPLICATION_ID);\n    removeMetaDataItemFromMainApplication(mainApplication, META_DELAY_APP_MEASUREMENT_INIT);\n  }\n\n  return androidManifest;\n}\n"]}