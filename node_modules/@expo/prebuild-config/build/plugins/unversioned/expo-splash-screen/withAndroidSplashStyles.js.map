{"version":3,"file":"withAndroidSplashStyles.js","sourceRoot":"","sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashStyles.ts"],"names":[],"mappings":";;;AAAA,yDAM8B;AAC9B,gEAA4D;AAG5D,qEAA8F;AAE9F,MAAM,kBAAkB,GAAG;IACzB,IAAI,EAAE,wBAAwB;IAC9B,MAAM,EAAE,UAAU;CACnB,CAAC;AAEF,MAAM,iBAAiB,GAAG,yBAAyB,CAAC;AAE7C,MAAM,uBAAuB,GAAiB,MAAM,CAAC,EAAE;IAC5D,MAAM,GAAG,kCAAiB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC1C,MAAM,eAAe,GAAG,wBAAwB,CAAC,MAAM,CAAC,CAAC;QACzD,MAAM,CAAC,UAAU,GAAG,uBAAuB,CAAC,MAAM,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;QAChF,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC;IACH,MAAM,GAAG,uCAAsB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC/C,MAAM,eAAe,GAAG,4BAA4B,CAAC,MAAM,CAAC,CAAC;QAC7D,MAAM,CAAC,UAAU,GAAG,uBAAuB,CAAC,MAAM,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;QAChF,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC;IACH,MAAM,GAAG,kCAAiB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC1C,MAAM,CAAC,UAAU,GAAG,yBAAyB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACjE,MAAM,CAAC,UAAU,GAAG,uBAAuB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAC/D,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC;AAjBW,QAAA,uBAAuB,2BAiBlC;AAEF,0EAA0E;AAC1E,SAAgB,yBAAyB,CAAC,MAA2C;;IACnF,MAAM,KAAK,GAAG;QACZ,IAAI,EAAE,wBAAwB;QAC9B,MAAM,EAAE,mCAAmC;KAC5C,CAAC;IAEF,MAAM,CAAC,SAAS,CAAC,KAAK,GAAG,MAAA,MAAA,MAAM,CAAC,SAAS,CAAC,KAAK,0CAAE,MAAM,mDAAG,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE;QACxE,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC;QACvC,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,IAAI,OAAO,EAAE;YACnC,OAAO,GAAG,IAAI,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,CAAC;SACxC;QACD,OAAO,CAAC,OAAO,CAAC;IAClB,CAAC,CAAC,CAAC;IAEH,OAAO,MAAM,CAAC;AAChB,CAAC;AAfD,8DAeC;AAED,SAAgB,wBAAwB,CAAC,MAAkB;;IACzD,OAAO,MAAA,MAAA,+CAAsB,CAAC,MAAM,CAAC,0CAAE,eAAe,mCAAI,IAAI,CAAC;AACjE,CAAC;AAFD,4DAEC;AAED,SAAgB,4BAA4B,CAAC,MAAkB;;IAC7D,OAAO,MAAA,MAAA,mDAA0B,CAAC,MAAM,CAAC,0CAAE,eAAe,mCAAI,IAAI,CAAC;AACrE,CAAC;AAFD,oEAEC;AAED,SAAgB,uBAAuB,CAAC,MAA2C;IACjF,0BAA0B;IAC1B,OAAO,8BAAa,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,EAAE;QACpD,GAAG,EAAE,IAAI;QACT,KAAK,EAAE,wBAAwB;QAC/B,IAAI,EAAE,0BAA0B;QAChC,MAAM,EAAE,kBAAkB;KAC3B,CAAC,CAAC;AACL,CAAC;AARD,0DAQC;AAED,SAAgB,uBAAuB,CACrC,MAA2C,EAC3C,eAA8B;IAE9B,OAAO,gBAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC,CAAC;AAC9F,CAAC;AALD,0DAKC","sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  withAndroidColors,\n  withAndroidColorsNight,\n  withAndroidStyles,\n} from '@expo/config-plugins';\nimport { Colors } from '@expo/config-plugins/build/android';\nimport { ExpoConfig } from '@expo/config-types';\n\nimport { getAndroidDarkSplashConfig, getAndroidSplashConfig } from './getAndroidSplashConfig';\n\nconst styleResourceGroup = {\n  name: 'Theme.App.SplashScreen',\n  parent: 'AppTheme',\n};\n\nconst SPLASH_COLOR_NAME = 'splashscreen_background';\n\nexport const withAndroidSplashStyles: ConfigPlugin = config => {\n  config = withAndroidColors(config, config => {\n    const backgroundColor = getSplashBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidColorsNight(config, config => {\n    const backgroundColor = getSplashDarkBackgroundColor(config);\n    config.modResults = setSplashColorsForTheme(config.modResults, backgroundColor);\n    return config;\n  });\n  config = withAndroidStyles(config, config => {\n    config.modResults = removeOldSplashStyleGroup(config.modResults);\n    config.modResults = setSplashStylesForTheme(config.modResults);\n    return config;\n  });\n  return config;\n};\n\n// Remove the old style group which didn't extend the base theme properly.\nexport function removeOldSplashStyleGroup(styles: AndroidConfig.Resources.ResourceXML) {\n  const group = {\n    name: 'Theme.App.SplashScreen',\n    parent: 'Theme.AppCompat.Light.NoActionBar',\n  };\n\n  styles.resources.style = styles.resources.style?.filter?.(({ $: head }) => {\n    let matches = head.name === group.name;\n    if (group.parent != null && matches) {\n      matches = head.parent === group.parent;\n    }\n    return !matches;\n  });\n\n  return styles;\n}\n\nexport function getSplashBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function getSplashDarkBackgroundColor(config: ExpoConfig): string | null {\n  return getAndroidDarkSplashConfig(config)?.backgroundColor ?? null;\n}\n\nexport function setSplashStylesForTheme(styles: AndroidConfig.Resources.ResourceXML) {\n  // Add splash screen image\n  return AndroidConfig.Styles.assignStylesValue(styles, {\n    add: true,\n    value: '@drawable/splashscreen',\n    name: 'android:windowBackground',\n    parent: styleResourceGroup,\n  });\n}\n\nexport function setSplashColorsForTheme(\n  colors: AndroidConfig.Resources.ResourceXML,\n  backgroundColor: string | null\n): AndroidConfig.Resources.ResourceXML {\n  return Colors.assignColorValue(colors, { value: backgroundColor, name: SPLASH_COLOR_NAME });\n}\n"]}